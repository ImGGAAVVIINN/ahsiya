<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AHSIYA</title>
    <style>
        #videoContainer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #000;
    overflow: hidden;
}

video {
    max-width: 100%;
    max-height: 100%;
    width: auto;
    height: auto;
    object-fit: contain; /* Ensure video maintains aspect ratio and stays within the container */
}

#redirectCircle {
    position: absolute;
    width: 150px;
    height: 150px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: none;
    cursor: pointer;
    z-index: 10;
}


    </style>
</head>
<body>

    <div id="videoContainer">
        <video id="videoPlayer" autoplay muted></video>
        <div id="redirectCircle"></div>
    </div>
    
    <script>
        const videoLinks = [
            //aa1 & aa2
            'https://link.storjsatelliteshare.io/s/jwx62xz6ogmk7slngywbl7teegfq/aa1%2Fahsiya-intro.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jvljyy2eyfzgvjmkkjzddgi5cxba/aa1%2F3459215cf4440cab50322ac6a685325a.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jvq6jpz4xdlp4hqkukcwokrj5jka/aa1%2F46520cc4d47c81df1b27535fef2c0188.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jws4vgbqlrnnryclow3wbuiq7h6a/aa1%2F5baf2b70b18ef7c3d0e4d11bacd7c344.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jxk6fqdfrdbcuzs25b5ars72wkqq/aa1%2Fd40d1674dc398792c742c6097c29de11.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jxlyxosit3s6gdff5n4nayjknbqa/aa1%2Flv_0_20240518220937.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/juyttxmwqcytvtzaecaggr4pcy4a/aa1%2Flv_0_20240524202351.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jueji5zpq6mfl6ryrq6q2o3u6mya/aa1%2Flv_0_20240720225010.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jvyif4mzcqq725jh4fxt74zy6auq/aa1%2Flv_0_20240802225004.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jul3yknzr3nsyrspiuvwwaybtpja/aa1%2FRDT_20240525_192752.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/juz655sfzktalb3sah5chsgaydxq/aa2%2F456598408_7804285563026789_5944112310659083646_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jxczmgy4lqwjwmrhsv67uig54jea/aa2%2F456711265_27216442997954795_7065164847423848830_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jxzri75mdr3atqfkulfgbupl24zq/aa2%2F456713241_8928871023795866_5871626189483499291_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jxijijxmiv4xl7saajoozy7etpoa/aa2%2F456909216_8057433167686309_1616290838543572092_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jxlcn7u4bqagvvnkexxzwznc23kq/aa2%2F457141878_26511636631816530_2267311591772088734_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jvztunzmq6hcymxpsfpwlnosu5dq/aa2%2F457175770_8057601631002324_1368104476340286838_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jwry3s4kvnbvs5gfysbo5w34mscq/aa2%2F457228987_8482807861750390_2478128430927144203_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jxxu5baolzniqwdiqp76a2pts7sa/aa2%2F457280370_7308339682602775_825640068035192075_n.mp4?view=1',
            //aa3
            'https://link.storjsatelliteshare.io/s/ju4ev4jqatxenrdjz4k7s7ibq2zq/aa3%2F456712118_27079694251617710_8803818201813144302_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/juyh6hrrnshkjyzsclqrclskvr4a/aa3%2F456749580_8525474500797609_8927987872149765681_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jw6c3vcvxn2ttpgnagerfvclsixq/aa3%2F456909177_8530569253628802_2157601955038232852_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jve3g65h5qgpjtzy665dsdys7lxa/aa3%2F456960283_8091952347537262_9176583819701433476_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jx44t4aglqgx7bythdkpvo2lfjoa/aa3%2F456968794_8079366542101109_2008377633127268462_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jwqzme75xt5o4bsp5g3cie647lnq/aa3%2F457030935_8235313939839384_8433259559207984108_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/juz2jv7epvpisemmjpkulhcfbj7q/aa3%2F457031677_8252369621496769_341058514406239094_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jxqtowzq6nwebwdidpim4q35tlva/aa3%2F457032458_7989383127849786_7991744169935455965_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jxqbuttj6562tuiabzktqzsa47ba/aa3%2F457051133_8114779411891531_268165964468289871_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/juaj34dng2q2p7iskzaj263myaha/aa3%2F457059425_7907353746030274_5143647059457255424_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jwv2hipxnt7kmxr3uf3enkantnmq/aa3%2F457097633_8063741563744563_6607798140115739135_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/juhiapxlva4ygelh4mrf4rppl7ka/aa3%2F457120474_8111521452224272_5227752706807992624_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jx3wilkevnt34oeo2vkc65xqmrea/aa3%2F457141434_8324332840957194_2581841303439851756_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jxbwacpymrcuetunmgfv6f647tgq/aa3%2F457141588_7822963121147563_572927943977231091_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jugpwsjhshp7awq2juug5zclrdlq/aa3%2F457141878_8168067109913609_24497871023257764_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jvyrhjctebln2bxwsgc57r2isyqq/aa3%2F457178320_7994498433919011_3586451248330676882_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jxrfrzfbhmlinixuognod7sivkva/aa3%2F457371468_8291155397616728_8436941396808826273_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/ju4g5f6p3xoyf4b5f5ie6xuf5sva/aa3%2F457398999_8398488236881785_5918388628037058802_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/juzsk4arknxjtddzbgbaelssc4fa/aa3%2F457401428_8117948201604194_4280448947031160606_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jw5sqt7k6pzrm4jgojatenizvo4q/aa3%2F457401838_8260794497312822_734039405723271159_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jury2d7tblqeupzvovvh35fx3ppq/aa3%2F457516604_8212693205511660_8142781536943206828_n.mp4?view=1',
            'https://link.storjsatelliteshare.io/s/jwdm3xokmabmgnnhxhzleqkbwpxa/aa3%2F457529690_8136910459723607_4307022265125813690_n.mp4?view=1',  
        ];

        let currentIndex = 0;
        let videoHistory = [];
        let futureVideos = [];
        let lastTenVideos = [];
        const maxHistorySize = 5;
        const maxLastTenSize = 10;
        const swipeThreshold = 0.2;
        const firstVideoIndex = 0;

        const videoPlayer = document.getElementById('videoPlayer');
        const redirectCircle = document.getElementById('redirectCircle');
        let videoList = [...videoLinks];
        let interacted = false;

        function playVideo(index) {
            currentIndex = index;
            videoPlayer.src = videoList[index];
            videoPlayer.controls = (index !== firstVideoIndex);
            videoPlayer.muted = (index === firstVideoIndex) ? !interacted : false;
            videoPlayer.loop = (index !== firstVideoIndex);
            videoPlayer.play();
            redirectCircle.style.display = (index === firstVideoIndex) ? 'block' : 'none';

            // Update the lastTenVideos list
            if (!lastTenVideos.includes(index)) {
                lastTenVideos.push(index);
                if (lastTenVideos.length > maxLastTenSize) {
                    lastTenVideos.shift();
                }
            }
        }

        function adjustVideoSize() {
            const videoAspectRatio = videoPlayer.videoWidth / videoPlayer.videoHeight;
            const windowAspectRatio = window.innerWidth / window.innerHeight;

            if (windowAspectRatio > videoAspectRatio) {
                videoPlayer.style.width = '100%';
                videoPlayer.style.height = 'auto';
            } else {
                videoPlayer.style.width = 'auto';
                videoPlayer.style.height = '100%';
            }
        }

        window.addEventListener('resize', adjustVideoSize); // Adjust video size on window resize

        function getRandomIndex(excludeIndexes) {
            let randomIndex;
            const validIndexes = videoList
                .map((_, index) => index)
                .filter(index => !excludeIndexes.includes(index) && index !== firstVideoIndex); // Exclude first video and recent 10

            if (validIndexes.length === 0) {
                return excludeIndexes[Math.floor(Math.random() * excludeIndexes.length)];
            }

            randomIndex = validIndexes[Math.floor(Math.random() * validIndexes.length)];
            return randomIndex;
        }

        function swipeLeft() {
            if (videoHistory.length > 0) {
                const previousIndex = videoHistory.pop();
                futureVideos.push(currentIndex); // Remember future videos
                playVideoWithAnimation(previousIndex, 'right');
            }
        }

        function swipeRight() {
            if (futureVideos.length > 0) {
                const nextIndex = futureVideos.pop();
                videoHistory.push(currentIndex); // Keep current video in history
                playVideoWithAnimation(nextIndex, 'left');
            } else {
                videoHistory.push(currentIndex);
                if (videoHistory.length > maxHistorySize) {
                    videoHistory.shift(); // Keep history within limit
                }

                const newIndex = getRandomIndex([...videoHistory, ...lastTenVideos, currentIndex]);
                playVideoWithAnimation(newIndex, 'left');
            }
        }

        function playVideoWithAnimation(newIndex, direction) {
        const oldVideoPlayer = videoPlayer.cloneNode();
        oldVideoPlayer.src = videoPlayer.src;

        videoContainer.appendChild(oldVideoPlayer);

        videoPlayer.style.transform = (direction === 'left') ? 'translateX(200%)' : 'translateX(-100%)';
        playVideo(newIndex);

        setTimeout(() => {
            oldVideoPlayer.style.transform = (direction === 'left') ? 'translateX(-100%)' : 'translateX(100%)';
            videoPlayer.style.transform = 'translateX(0)';
        }, 10);

        // Ensure the old video completely exits the screen before removing it
        oldVideoPlayer.addEventListener('transitionend', () => {
            videoContainer.removeChild(oldVideoPlayer);
        });

        // Set the transition duration (increase if necessary for smoother exit)
        oldVideoPlayer.style.transition = 'transform 0.5s ease';
    }



        function handleTouchStart(evt) {
            const firstTouch = evt.touches[0];
            xDown = firstTouch.clientX;
            windowWidth = window.innerWidth;
        }

        function handleTouchMove(evt) {
            if (!xDown) return;

            const xUp = evt.touches[0].clientX;
            const xDiff = xDown - xUp;

            if (Math.abs(xDiff) > windowWidth * swipeThreshold) {
                interacted = true;
                if (xDiff > 0) {
                    swipeRight();
                } else {
                    swipeLeft();
                }
                xDown = null;
            }
        }

        let xDown = null;
        let windowWidth = window.innerWidth;

        document.addEventListener('touchstart', handleTouchStart, false);
        document.addEventListener('touchmove', handleTouchMove, false);

        redirectCircle.addEventListener('click', () => {
            const randomIndex = getRandomIndex([currentIndex, firstVideoIndex]);
            playVideo(randomIndex);
        });

        playVideo(currentIndex);
    </script>
</body>
</html>
